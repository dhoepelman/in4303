module testrefres-Class

language MiniJava

setup MiniJavaStart [[
	class Main {
    	public static void main(String[] args) {
      		System.out.println(1);
    	}
  	}
]]

test backward method name resolution [[
  class C {
    public int [[m]]() { return 0; }
    public int m2() {
    	System.out.println(this.[[m]]());
    	return 0;
    }
  }
]] resolve #1 to #2

test forward method name resolution [[
  class C {
    public int m2() {
    	System.out.println(this.[[m]]());
    	return 0;
    }
    
    public int [[m]]() { return 0; }
  }
]] resolve #1 to #2


test correct program [[
  class Foo {}

  class Foobar {
    Foo x;
  }
]] 0 errors

test error on duplicate class [[
  class [[Foo]] {}

  class [[Foo]] {}
]] 2 errors

test warning on unused class [[
  class Foo {}

  class [[Foobar]] {
    Foo x;
  }
]] 1 warning